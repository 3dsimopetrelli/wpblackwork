<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Smart Header per Elementor WordPress</title>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- âš ï¸ IMPORTANTE - LEGGERE PRIMA DI USARE âš ï¸ -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--

    ğŸ”´ REQUISITO FONDAMENTALE - CLASSE CSS OBBLIGATORIA ğŸ”´

    Per far funzionare questo sistema, DEVI aggiungere la classe CSS "smart-header"
    al container/section dell'header in Elementor:

    PASSAGGI IN ELEMENTOR:
    1. Apri la pagina/template header in Elementor
    2. Clicca sul CONTAINER/SECTION principale dell'header (quello piÃ¹ esterno)
    3. Nel pannello di sinistra, vai alla tab "AVANZATE" (icona ingranaggio)
    4. Trova la sezione "CSS ID & Classi"
    5. Nel campo "Classi CSS" scrivi esattamente: smart-header
    6. Salva e pubblica

    âŒ SENZA questa classe il codice NON funzionerÃ !
    âœ… CON questa classe l'header diventerÃ  intelligente!

    NOTA: Non serve altro! Il JavaScript rileverÃ  automaticamente l'header con
    questa classe e applicherÃ  tutti gli effetti.

-->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<h1 style="color: #e74c3c; border: 3px solid #e74c3c; padding: 20px; background: #fef5f5; margin: 20px 0;">
    âš ï¸ ATTENZIONE: Aggiungi la classe "smart-header" al tuo header in Elementor!
</h1>

<div style="background: #f8f9fa; padding: 30px; margin: 20px 0; border-left: 5px solid #3498db;">
    <h2 style="color: #2c3e50; margin-top: 0;">ğŸ“‹ Istruzioni per WordPress/Elementor</h2>

    <h3 style="color: #34495e;">DOVE INSERIRE QUESTO CODICE:</h3>

    <p><strong>Opzione 1 - Nel tema (consigliato):</strong></p>
    <ol>
        <li>WordPress Admin â†’ Aspetto â†’ Editor del tema</li>
        <li>Seleziona "functions.php" o crea un file custom</li>
        <li>Copia SOLO la sezione PHP qui sotto (dal tag &lt;?php fino a ?&gt;)</li>
        <li>Incolla nel file e salva</li>
    </ol>

    <p><strong>Opzione 2 - Con plugin:</strong></p>
    <ol>
        <li>Installa plugin "Code Snippets" o "Insert Headers and Footers"</li>
        <li>Crea un nuovo snippet</li>
        <li>Copia SOLO il codice CSS e JS (dal tag &lt;style&gt; al tag &lt;/script&gt;)</li>
        <li>Incolla nella sezione FOOTER</li>
        <li>Salva e attiva</li>
    </ol>

    <h3 style="color: #34495e;">âš™ï¸ CONFIGURAZIONE ELEMENTOR:</h3>
    <ol>
        <li>Apri il tuo Header in Elementor</li>
        <li>Seleziona il Container/Section principale dell'header</li>
        <li>Vai su: <strong>Avanzate â†’ CSS ID & Classi â†’ Classi CSS</strong></li>
        <li>Scrivi: <strong>smart-header</strong></li>
        <li>Salva e pubblica</li>
    </ol>

    <h3 style="color: #34495e;">ğŸ¯ COMPORTAMENTO:</h3>
    <ul>
        <li>âœ… Header fisso in cima alla pagina</li>
        <li>âœ… Si nasconde quando scrolli GIÃ™ (dopo 100px)</li>
        <li>âœ… Riappare immediatamente quando scrolli SU</li>
        <li>âœ… Effetto blur e trasparenza quando scrollato</li>
        <li>âœ… Animazioni smooth e fluide</li>
        <li>âœ… Ottimizzato per performance e mobile</li>
    </ul>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- CODICE DA COPIARE IN WORDPRESS - INIZIO -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<?php
/**
 * Sistema Smart Header per Elementor
 *
 * Inserisci questo codice in functions.php del tuo tema child
 * oppure usa un plugin come "Code Snippets"
 */

function elementor_smart_header_scripts() {
    // Verifica che non siamo nell'editor di Elementor
    if ( \Elementor\Plugin::$instance->preview->is_preview_mode() ) {
        return;
    }
    ?>

    <!-- ==================== INIZIO CSS SMART HEADER ==================== -->
    <style>
        /*
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         * SMART HEADER - STILI BASE
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         */

        .smart-header {
            /* Posizionamento fisso in cima */
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            width: 100% !important;
            z-index: 9999 !important;

            /* Transizione smooth per tutte le proprietÃ  */
            transition: transform 0.3s ease-in-out,
                        background-color 0.3s ease-in-out,
                        backdrop-filter 0.3s ease-in-out,
                        box-shadow 0.3s ease-in-out !important;

            /* Inizialmente senza effetti blur */
            background-color: transparent;
            backdrop-filter: none;
            box-shadow: none;

            /* Performance optimization */
            will-change: transform;
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
        }

        /*
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         * STATO: SCROLLED (quando la pagina Ã¨ scrollata)
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         */

        .smart-header.scrolled {
            /* Background semi-trasparente */
            background-color: rgba(255, 255, 255, 0.95) !important;

            /* Effetto blur al background */
            backdrop-filter: blur(10px) !important;
            -webkit-backdrop-filter: blur(10px) !important;

            /* Box shadow leggera per profonditÃ  */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1) !important;
        }

        /* Versione dark (opzionale - decommenta se serve tema scuro) */
        /*
        .smart-header.scrolled.dark-theme {
            background-color: rgba(0, 0, 0, 0.9) !important;
            box-shadow: 0 2px 10px rgba(255, 255, 255, 0.1) !important;
        }
        */

        /*
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         * STATO: HIDDEN (header nascosto quando si scrolla giÃ¹)
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         */

        .smart-header.hidden {
            /* Sposta l'header fuori schermo verso l'alto */
            transform: translateY(-100%) !important;
        }

        /*
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         * STATO: VISIBLE (header visibile quando si scrolla su)
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         */

        .smart-header.visible {
            /* Riporta l'header nella posizione originale */
            transform: translateY(0) !important;
        }

        /*
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         * RESPONSIVE - OTTIMIZZAZIONI MOBILE
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         */

        @media screen and (max-width: 768px) {
            .smart-header {
                /* Transizioni piÃ¹ veloci su mobile per migliore UX */
                transition: transform 0.25s ease-in-out,
                            background-color 0.25s ease-in-out,
                            backdrop-filter 0.25s ease-in-out,
                            box-shadow 0.25s ease-in-out !important;
            }

            .smart-header.scrolled {
                /* Blur meno intenso su mobile per performance */
                backdrop-filter: blur(8px) !important;
                -webkit-backdrop-filter: blur(8px) !important;
            }
        }

        /*
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         * FIX PER CONTENUTO SOTTO L'HEADER
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         * Previene che il contenuto venga coperto dall'header fisso
         */

        body {
            /* Calcola l'altezza dell'header automaticamente con JS */
            padding-top: var(--smart-header-height, 80px);
        }

        /*
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         * SUPPORTO BROWSER E FALLBACK
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         */

        /* Fallback per browser che non supportano backdrop-filter */
        @supports not (backdrop-filter: blur(10px)) {
            .smart-header.scrolled {
                background-color: rgba(255, 255, 255, 0.98) !important;
            }
        }

        /* Riduzione movimento per utenti con preferenze accessibilitÃ  */
        @media (prefers-reduced-motion: reduce) {
            .smart-header {
                transition: none !important;
            }
        }
    </style>
    <!-- ==================== FINE CSS SMART HEADER ==================== -->

    <!-- ==================== INIZIO JAVASCRIPT SMART HEADER ==================== -->
    <script>
        /**
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         * SMART HEADER SYSTEM
         * Sistema intelligente per header Elementor con scroll detection
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         */

        (function() {
            'use strict';

            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // CONFIGURAZIONE
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

            const CONFIG = {
                headerSelector: '.smart-header',           // Selettore CSS dell'header
                scrollThreshold: 100,                     // Pixel di scroll prima di reagire
                scrollDelta: 5,                           // SensibilitÃ  scroll (px)
                blurThreshold: 50,                        // Pixel di scroll per attivare blur
                throttleDelay: 10,                        // Delay throttle in ms (performance)
                classes: {
                    scrolled: 'scrolled',                 // Classe quando page Ã¨ scrollata
                    hidden: 'hidden',                     // Classe quando header Ã¨ nascosto
                    visible: 'visible'                    // Classe quando header Ã¨ visibile
                }
            };

            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // VARIABILI GLOBALI
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

            let header = null;                            // Elemento header
            let lastScrollTop = 0;                        // Ultima posizione scroll
            let scrollDirection = null;                   // Direzione scroll (up/down)
            let ticking = false;                          // Flag per requestAnimationFrame
            let headerHeight = 0;                         // Altezza dell'header

            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // FUNZIONI UTILITY
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

            /**
             * Throttle function per ottimizzare performance
             * Limita la frequenza di esecuzione di una funzione
             */
            function throttle(func, delay) {
                let timeoutId;
                let lastExecTime = 0;

                return function(...args) {
                    const currentTime = Date.now();
                    const timeSinceLastExec = currentTime - lastExecTime;

                    clearTimeout(timeoutId);

                    if (timeSinceLastExec >= delay) {
                        func.apply(this, args);
                        lastExecTime = currentTime;
                    } else {
                        timeoutId = setTimeout(() => {
                            func.apply(this, args);
                            lastExecTime = Date.now();
                        }, delay - timeSinceLastExec);
                    }
                };
            }

            /**
             * Calcola l'altezza dell'header e aggiorna CSS variable
             */
            function updateHeaderHeight() {
                if (!header) return;

                headerHeight = header.offsetHeight;
                document.documentElement.style.setProperty(
                    '--smart-header-height',
                    headerHeight + 'px'
                );
            }

            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // LOGICA PRINCIPALE SMART HEADER
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

            /**
             * Gestisce il comportamento dell'header in base allo scroll
             */
            function handleHeaderBehavior() {
                const currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;

                // Previeni valori negativi su mobile (bounce effect)
                if (currentScrollTop < 0) return;

                // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                // 1. GESTIONE EFFETTO BLUR E BACKGROUND
                // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

                if (currentScrollTop > CONFIG.blurThreshold) {
                    // Aggiungi classe scrolled per effetto blur
                    header.classList.add(CONFIG.classes.scrolled);
                } else {
                    // Rimuovi classe scrolled
                    header.classList.remove(CONFIG.classes.scrolled);
                }

                // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                // 2. GESTIONE SHOW/HIDE HEADER
                // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

                // Calcola la differenza di scroll
                const scrollDifference = Math.abs(currentScrollTop - lastScrollTop);

                // Procedi solo se lo scroll supera il delta minimo
                if (scrollDifference < CONFIG.scrollDelta) {
                    return;
                }

                // Determina direzione scroll
                if (currentScrollTop > lastScrollTop) {
                    // â†“ SCROLL GIÃ™
                    scrollDirection = 'down';

                    // Nascondi header solo se abbiamo scrollato oltre la soglia
                    if (currentScrollTop > CONFIG.scrollThreshold) {
                        header.classList.add(CONFIG.classes.hidden);
                        header.classList.remove(CONFIG.classes.visible);
                    }

                } else {
                    // â†‘ SCROLL SU
                    scrollDirection = 'up';

                    // Mostra header immediatamente quando si scrolla su
                    header.classList.remove(CONFIG.classes.hidden);
                    header.classList.add(CONFIG.classes.visible);
                }

                // Aggiorna ultima posizione scroll
                lastScrollTop = currentScrollTop;
            }

            /**
             * Request animation frame per smooth performance
             */
            function requestTick() {
                if (!ticking) {
                    window.requestAnimationFrame(() => {
                        handleHeaderBehavior();
                        ticking = false;
                    });
                    ticking = true;
                }
            }

            /**
             * Handler scroll con throttle
             */
            const onScroll = throttle(function() {
                requestTick();
            }, CONFIG.throttleDelay);

            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // INIZIALIZZAZIONE
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

            /**
             * Inizializza il sistema smart header
             */
            function init() {
                // Trova l'header
                header = document.querySelector(CONFIG.headerSelector);

                // Verifica che l'header esista
                if (!header) {
                    console.warn('âš ï¸ Smart Header: Elemento con classe "smart-header" non trovato!');
                    console.warn('ğŸ’¡ Assicurati di aver aggiunto la classe "smart-header" al container header in Elementor');
                    return;
                }

                console.log('âœ… Smart Header: Inizializzato correttamente');

                // Calcola altezza header iniziale
                updateHeaderHeight();

                // Imposta stato iniziale
                lastScrollTop = window.pageYOffset || document.documentElement.scrollTop;

                // Se la pagina Ã¨ giÃ  scrollata all'init, aggiungi classe scrolled
                if (lastScrollTop > CONFIG.blurThreshold) {
                    header.classList.add(CONFIG.classes.scrolled);
                }

                // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                // EVENT LISTENERS
                // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

                // Listener per scroll
                window.addEventListener('scroll', onScroll, { passive: true });

                // Listener per resize (ricalcola altezza header)
                window.addEventListener('resize', throttle(updateHeaderHeight, 200));

                // Listener per quando il DOM viene modificato (Elementor live edit)
                const resizeObserver = new ResizeObserver(throttle(updateHeaderHeight, 200));
                resizeObserver.observe(header);
            }

            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // AVVIO AUTOMATICO
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

            // Avvia quando il DOM Ã¨ pronto
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', init);
            } else {
                // DOM giÃ  pronto, inizializza subito
                init();
            }

            // Ri-inizializza dopo che Elementor ha finito di caricare
            window.addEventListener('elementor/frontend/init', function() {
                setTimeout(init, 100);
            });

        })();
    </script>
    <!-- ==================== FINE JAVASCRIPT SMART HEADER ==================== -->

    <?php
}

// Hook per aggiungere gli script nel footer
add_action('wp_footer', 'elementor_smart_header_scripts', 999);
?>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- CODICE DA COPIARE IN WORDPRESS - FINE -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- SEZIONE TEST E DEMO -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<div style="background: #fff3cd; border: 2px solid #ffc107; padding: 20px; margin: 20px 0;">
    <h2 style="color: #856404; margin-top: 0;">ğŸ§ª TEST DEL CODICE</h2>
    <p><strong>Per testare se funziona:</strong></p>
    <ol>
        <li>Apri il tuo sito WordPress</li>
        <li>Ispeziona l'header con gli strumenti sviluppatore (F12)</li>
        <li>Verifica che l'header abbia la classe "smart-header"</li>
        <li>Scrolla la pagina GIÃ™ â†’ l'header dovrebbe scomparire</li>
        <li>Scrolla SU â†’ l'header dovrebbe riapparire con effetto blur</li>
    </ol>

    <p><strong>Aprire la Console (F12) e cercare:</strong></p>
    <ul>
        <li>âœ… "Smart Header: Inizializzato correttamente" = TUTTO OK!</li>
        <li>âš ï¸ "Smart Header: Elemento non trovato" = Aggiungi la classe!</li>
    </ul>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- PERSONALIZZAZIONI OPZIONALI -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<div style="background: #e8f4f8; border-left: 5px solid #17a2b8; padding: 20px; margin: 20px 0;">
    <h2 style="color: #0c5460; margin-top: 0;">âš™ï¸ PERSONALIZZAZIONI</h2>

    <h3>Modificare i parametri:</h3>
    <p>Nel JavaScript, cerca la sezione <code>CONFIG</code> e modifica:</p>

    <ul>
        <li><strong>scrollThreshold: 100</strong> â†’ Pixel prima che header reagisca (aumenta per nascondere piÃ¹ tardi)</li>
        <li><strong>scrollDelta: 5</strong> â†’ SensibilitÃ  (diminuisci per reagire a scroll piÃ¹ piccoli)</li>
        <li><strong>blurThreshold: 50</strong> â†’ Quando attivare blur (diminuisci per blur immediato)</li>
        <li><strong>throttleDelay: 10</strong> â†’ Performance (aumenta se hai problemi di lag)</li>
    </ul>

    <h3>Modificare i colori:</h3>
    <p>Nel CSS, cerca <code>.smart-header.scrolled</code> e modifica:</p>
    <ul>
        <li><strong>background-color: rgba(255, 255, 255, 0.95)</strong> â†’ Cambia colore e trasparenza</li>
        <li><strong>backdrop-filter: blur(10px)</strong> â†’ Cambia intensitÃ  blur</li>
        <li><strong>box-shadow</strong> â†’ Modifica l'ombra</li>
    </ul>

    <h3>Tema scuro:</h3>
    <p>Decommenta nel CSS la sezione <code>.smart-header.scrolled.dark-theme</code> e aggiungi la classe "dark-theme" insieme a "smart-header" in Elementor</p>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- TROUBLESHOOTING -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<div style="background: #f8d7da; border: 2px solid #dc3545; padding: 20px; margin: 20px 0;">
    <h2 style="color: #721c24; margin-top: 0;">ğŸ”§ RISOLUZIONE PROBLEMI</h2>

    <h3>âŒ L'header non si nasconde/mostra:</h3>
    <ul>
        <li>Verifica di aver aggiunto la classe "smart-header" in Elementor</li>
        <li>Controlla la console (F12) per errori JavaScript</li>
        <li>Verifica che il codice sia stato inserito correttamente</li>
        <li>Prova a svuotare la cache di WordPress</li>
    </ul>

    <h3>âŒ Il blur non funziona:</h3>
    <ul>
        <li>Alcuni browser vecchi non supportano backdrop-filter</li>
        <li>Verifica con un browser moderno (Chrome, Firefox, Safari aggiornati)</li>
        <li>Il fallback Ã¨ giÃ  incluso nel codice</li>
    </ul>

    <h3>âŒ L'header copre il contenuto:</h3>
    <ul>
        <li>Il padding-top viene calcolato automaticamente</li>
        <li>Se non funziona, aggiungi manualmente in CSS: <code>body { padding-top: 100px; }</code></li>
        <li>Sostituisci 100px con l'altezza effettiva del tuo header</li>
    </ul>

    <h3>âŒ Conflitti con altri plugin:</h3>
    <ul>
        <li>Disattiva temporaneamente altri plugin di sticky header</li>
        <li>Verifica che non ci siano altri script che controllano lo scroll</li>
        <li>In caso di conflitto, aumenta lo z-index nel CSS</li>
    </ul>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- INFORMAZIONI FINALI -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<div style="background: #d4edda; border: 2px solid #28a745; padding: 20px; margin: 20px 0;">
    <h2 style="color: #155724; margin-top: 0;">âœ… CHECKLIST FINALE</h2>
    <ul style="list-style: none; padding: 0;">
        <li>â˜ Ho copiato il codice PHP in functions.php (o usato plugin Code Snippets)</li>
        <li>â˜ Ho aggiunto la classe "smart-header" al container header in Elementor</li>
        <li>â˜ Ho salvato e pubblicato le modifiche in Elementor</li>
        <li>â˜ Ho svuotato la cache di WordPress</li>
        <li>â˜ Ho testato lo scroll su desktop</li>
        <li>â˜ Ho testato lo scroll su mobile</li>
        <li>â˜ L'header si nasconde quando scrolo giÃ¹ âœ“</li>
        <li>â˜ L'header riappare quando scrolo su âœ“</li>
        <li>â˜ L'effetto blur funziona âœ“</li>
    </ul>
</div>

<div style="background: #17a2b8; color: white; padding: 20px; margin: 20px 0; text-align: center;">
    <h2 style="margin-top: 0;">ğŸ‰ FATTO!</h2>
    <p style="font-size: 18px; margin-bottom: 0;">
        Il tuo header intelligente Ã¨ pronto! Buon lavoro! ğŸš€
    </p>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- CREDITS E NOTE TECNICHE -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<div style="background: #f8f9fa; padding: 20px; margin: 20px 0; font-size: 12px; color: #6c757d;">
    <h3>ğŸ“ Note Tecniche</h3>
    <ul>
        <li><strong>Performance:</strong> Usa requestAnimationFrame e throttling per scroll fluido</li>
        <li><strong>CompatibilitÃ :</strong> Funziona su tutti i browser moderni + fallback</li>
        <li><strong>Mobile:</strong> Ottimizzato con blur ridotto e transizioni piÃ¹ veloci</li>
        <li><strong>AccessibilitÃ :</strong> Rispetta le preferenze "prefers-reduced-motion"</li>
        <li><strong>SEO:</strong> Non influisce sul SEO (solo CSS/JS frontend)</li>
        <li><strong>Cache:</strong> Compatibile con tutti i plugin di cache</li>
    </ul>

    <p><strong>Versione:</strong> 1.0 | <strong>Ultimo aggiornamento:</strong> 2025</p>
    <p><strong>Tecnologie:</strong> HTML5, CSS3, JavaScript ES6, WordPress, Elementor</p>
</div>

</body>
</html>
